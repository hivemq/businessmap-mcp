{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": [
    "go@1.25",
    "gopls@0.20"
  ],
  "env_from": ".env",
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null"
    ],
    "scripts": {
      "build": [
        "go mod download",
        "go build -o businessmap-mcp"
      ],
      "test": [
        "echo 'Checking environment variables...'",
        "if [ -z \"$KANBANIZE_API_KEY\" ] || [ -z \"$KANBANIZE_BASE_URL\" ]; then echo 'ERROR: Required environment variables not set. Check .env file.'; exit 1; fi",
        "echo 'Building project...'",
        "go mod download",
        "go build -o businessmap-mcp",
        "echo 'Running Go tests...'",
        "go test ./...",
        "if [ $# -gt 0 ]; then echo 'Running integration test with card:' $1; ./tests/test_mcp.sh \"$@\"; else echo 'Integration test ready. Run with card ID: devbox run test -- <card_id>'; fi"
      ]
    }
  }
}